<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link
  rel="stylesheet"
  href="{{ 'component-cart-notification.css' | asset_url }}"
  media="print"
  onload="this.media='all'"
>

{%- if settings.predictive_search_enabled -%}
  <link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

<link rel="stylesheet" href="{{ 'fn-header.css' | asset_url }}">

<style>
  header-drawer {
    justify-self: start;
    margin-left: -1.2rem;
  }

  {%- if section.settings.sticky_header_type == 'reduce-logo-size' -%}
    .scrolled-past-header .header__heading-logo-wrapper {
      width: 75%;
    }
  {%- endif -%}

  {%- if section.settings.menu_type_desktop != "drawer" -%}
    @media screen and (min-width: 1350px) {
      header-drawer {
        display: none;
      }
    }
  {%- endif -%}

  .menu-drawer-container {
    display: flex;
  }

  .list-menu {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .list-menu--inline {
    display: inline-flex;
    flex-wrap: wrap;
  }

  summary.list-menu__item {
    padding-right: 2.7rem;
  }

  .list-menu__item {
    display: flex;
    align-items: center;
    line-height: calc(1 + 0.3 / var(--font-body-scale));
  }

  .list-menu__item--link {
    text-decoration: none;
    padding-bottom: 1rem;
    padding-top: 1rem;
    line-height: calc(1 + 0.8 / var(--font-body-scale));
  }

  @media screen and (min-width: 750px) {
    .list-menu__item--link {
      padding-bottom: 0.5rem;
      padding-top: 0.5rem;
    }
  }
</style>

{%- style -%}
  .header {
    padding: {{ section.settings.padding_top | times: 0.5 | round: 0 }}px 3rem {{ section.settings.padding_bottom | times: 0.5 | round: 0 }}px 3rem;
  }

  .section-header {
    position: sticky; /* This is for fixing a Safari z-index issue. PR #2147 */
    margin-bottom: {{ section.settings.margin_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-header {
      margin-bottom: {{ section.settings.margin_bottom }}px;
    }
  }

  .header-wrapper {
        padding-top: {{ section.settings.padding_top | times: 0.5 }}px;
        padding-bottom: {{ section.settings.padding_bottom | times: 0.5 }}px;
    }

  @media screen and (min-width: 990px) {
    .header-wrapper {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  .fn-header {
    grid-template-columns: 1fr auto 1fr;
    overflow: hidden;
  }
  {% if template.name == 'index' %}
    .fn-header-section {
      height: 0;
    }
    .hidden-index-load {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s cubic-bezier(0.5, 0, 0, 1), visibility 0.8s cubic-bezier(0.5, 0, 0, 1)
    }
    .scrolled-header .hidden-index-load {
      opacity: 1;
      visibility: visible;
    }
    .fn-header {
      transition: background-color 0.8s cubic-bezier(0.5, 0, 0, 1), box-shadow 0.8s cubic-bezier(0.5, 0, 0, 1);
      background: transparent;
      box-shadow: 0px 20px 120px 0px hsla(0, 0%, 0%, 0.0);
    }
    .scrolled-header .fn-header {
      box-shadow: 0px 20px 120px 0px hsla(0, 0%, 0%, 0.15);
      background: rgb(var(--color-background));
      background: var(--gradient-background);
    }
    .header__icons .icon {
      color: #fff;
      transition: color 0.8s cubic-bezier(0.5, 0, 0, 1);
    }
    .scrolled-header .header__icons .icon {
      color: #000;
    }
  {% endif %}
  .fn-header-section {
    position: sticky;
    width: 100%;
    top: 0;
  }
  @media screen and (max-width: 749px) {
    .fn-logo-filler {
      width: {{ settings.logo_width | times: 0.75 }}px !important;
    }
  }
  .fn-logo-index {
    width: 100%;
  }
  .fn-header-section:not(.scrolled-header) .fn-logo-index svg {
    width: 100%;
  }
  .fn-header-section.scrolled-header .fn-logo-index svg {
    width: {{ settings.logo_width }}px;
    color: #000
  }
  @media screen and (max-width: 749px) {
    .fn-header-section.scrolled-header .fn-logo-index {
      width: {{ settings.logo_width | times: 0.75 }}px !important;
    }
  }
{%- endstyle -%}

{% assign highlighted_links = section.settings.highlighted_links | downcase %}

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="icon-search" viewbox="0 0 20 20" fill="none">
    <path d="M13.7783 13.9004L13.4492 13.5713L13.0974 13.876C11.7605 15.0338 10.0194 15.7344 8.11719 15.7344C3.91751 15.7344 0.5 12.3169 0.5 8.11719C0.5 3.91751 3.91751 0.5 8.11719 0.5C12.3169 0.5 15.7344 3.91751 15.7344 8.11719C15.7344 10.0197 15.0337 11.7609 13.8755 13.098L13.5708 13.4498L13.8999 13.7789L19.4748 19.3532C19.4748 19.3533 19.4748 19.3533 19.4749 19.3533C19.5085 19.387 19.5084 19.4413 19.4749 19.4748C19.4413 19.5084 19.3868 19.5084 19.3533 19.4748L19.3533 19.4748L13.7783 13.9004ZM8.11719 15.5625C12.223 15.5625 15.5625 12.223 15.5625 8.11719C15.5625 4.0114 12.223 0.671875 8.11719 0.671875C4.0114 0.671875 0.671875 4.0114 0.671875 8.11719C0.671875 12.223 4.0114 15.5625 8.11719 15.5625Z" fill="currentColor" stroke="currentColor"/>
  </symbol>

  <symbol id="icon-reset" class="icon icon-close"  fill="none" viewBox="0 0 18 18" stroke="currentColor">
    <circle r="8.5" cy="9" cx="9" stroke-opacity="0.2"/>
    <path d="M6.82972 6.82915L1.17193 1.17097" stroke-linecap="round" stroke-linejoin="round" transform="translate(5 5)"/>
    <path d="M1.22896 6.88502L6.77288 1.11523" stroke-linecap="round" stroke-linejoin="round" transform="translate(5 5)"/>
  </symbol>

  <symbol id="icon-close" class="icon icon-close" fill="none" viewBox="0 0 18 17">
    <path d="M.865 15.978a.5.5 0 00.707.707l7.433-7.431 7.579 7.282a.501.501 0 00.846-.37.5.5 0 00-.153-.351L9.712 8.546l7.417-7.416a.5.5 0 10-.707-.708L8.991 7.853 1.413.573a.5.5 0 10-.693.72l7.563 7.268-7.418 7.417z" fill="currentColor">
  </symbol>
</svg>

<div class="header-wrapper">
  <div class="page-width">
    {%- liquid
      assign social_links = false
      assign localization_forms = false

      if settings.social_twitter_link != blank or settings.social_facebook_link != blank or settings.social_pinterest_link != blank or settings.social_instagram_link != blank or settings.social_youtube_link != blank or settings.social_vimeo_link != blank or settings.social_tiktok_link != blank or settings.social_tumblr_link != blank or settings.social_snapchat_link != blank
        assign social_links = true
      endif

      if localization.available_countries.size > 1 and section.settings.enable_country_selector or section.settings.enable_language_selector and localization.available_languages.size > 1
        assign localization_forms = true
      endif
    -%}
    <header class="fn-header color-{{ section.settings.color_scheme }} gradient{% if section.settings.menu != blank %} header--has-menu{% endif %}{% if has_app_block %} header--has-app{% endif %}{% if social_links %} header--has-social{% endif %}{% if shop.customer_accounts_enabled %} header--has-account{% endif %}{% if localization_forms %} header--has-localizations{% endif %}">
      <div class="menu-side hidden-index-load">
        {%- liquid
          if section.settings.menu != blank
            render 'header-drawer', highlighted_links: highlighted_links
          endif
        -%}

        {% if section.settings.menu != blank %}
          {% render 'header-dropdown-menu',
            menu: section.settings.menu,
            classes: 'primary-menu',
            highlighted_links: highlighted_links
          %}
        {% endif %}
      </div>

      {% if template.name != 'index' %}
        <a href="{{ routes.root_url }}" class="fn-logo link link--text focus-inset">
          <div class="header__heading-logo-wrapper">
            {% render 'logo', width: settings.logo_width %}
          </div>
        </a>
      {% else %}
        <div class="fn-logo-filler" style="display: block; width: {{ settings.logo_width }}px"></div>
      {% endif %}

      <div class="icons-side">
        {% if section.settings.secondary_menu != blank %}
          {% render 'header-dropdown-menu',
            menu: section.settings.secondary_menu,
            classes: 'secondary-menu hidden-index-load',
            highlighted_links: highlighted_links
          %}
        {% endif %}

        <div class="header__icons{% if section.settings.enable_country_selector or section.settings.enable_language_selector %} header__icons--localization header-localization{% endif %}">
          <div class="desktop-localization-wrapper">
            {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
              <localization-form class="small-hide medium-hide" data-prevent-hide>
                {%- form 'localization', id: 'HeaderCountryForm', class: 'localization-form' -%}
                  <div>
                    <h2 class="visually-hidden" id="HeaderCountryLabel">{{ 'localization.country_label' | t }}</h2>
                    {%- render 'country-localization', localPosition: 'HeaderCountry' -%}
                  </div>
                {%- endform -%}
              </localization-form>
            {% endif %}

            {%- if section.settings.enable_language_selector and localization.available_languages.size > 1 -%}
              <localization-form class="small-hide medium-hide" data-prevent-hide>
                {%- form 'localization', id: 'HeaderLanguageForm', class: 'localization-form' -%}
                  <div>
                    <h2 class="visually-hidden" id="HeaderLanguageLabel">{{ 'localization.language_label' | t }}</h2>
                    {%- render 'language-localization', localPosition: 'HeaderLanguage' -%}
                  </div>
                {%- endform -%}
              </localization-form>
            {%- endif -%}
          </div>

          {%- if shop.customer_accounts_enabled -%}
            <a
              href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
              class="header__icon header__icon--account link focus-inset{% if section.settings.menu != blank %} small-hide{% endif %}"
            >
              {%- if section.settings.enable_customer_avatar -%}
                <account-icon>
                  {%- if customer and customer.has_avatar? -%}
                    {{ customer | avatar }}
                  {%- else -%}
                    {% render 'icon-account' %}
                  {%- endif -%}
                </account-icon>
              {%- else -%}
                {% render 'icon-account' %}
              {%- endif -%}
              <span class="visually-hidden">
                {%- liquid
                  if customer
                    echo 'customer.account_fallback' | t
                  else
                    echo 'customer.log_in' | t
                  endif
                -%}
              </span>
            </a>
          {%- endif -%}

          {% render 'header-search', input_id: 'Search-In-Modal' %}

          <a href="#" class="heart-wrapper header__icon header__icon--heart link focus-inset">
            {% render 'icon-heart' %}
          </a>

          <a
            href="{{ routes.cart_url }}"
            class="header__icon header__icon--cart link focus-inset"
            id="cart-icon-bubble"
          >
            {%- liquid
              if cart == empty
                render 'icon-cart-empty'
              else
                render 'icon-cart'
              endif
            -%}
            <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
            {%- if cart != empty -%}
              <div class="cart-count-bubble">
                {%- if cart.item_count < 100 -%}
                  <span aria-hidden="true">{{ cart.item_count }}</span>
                {%- endif -%}
                <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
              </div>
            {%- endif -%}
          </a>
        </div>
      </div>
    </header>
  </div>
  {% if template.name == 'index' %}
    <div class="fn-logo fn-logo-index page-width">
      <div class="header__heading-logo-wrapper">
        <a href="/" class="full-unstyled-link">
          {% render 'logo', width: settings.logo_width %}
        </a>
      </div>
    </div>
  {% endif %}
</div>

{%- if settings.cart_type == 'notification' -%}
  {%- render 'cart-notification', color_scheme: section.settings.color_scheme, desktop_menu_type: 'drawer' -%}
{%- endif -%}

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "name": {{ shop.name | json }},
    {% if settings.logo %}
      "logo": {{ settings.logo | image_url: width: 500 | prepend: "https:" | json }},
    {% endif %}
    "sameAs": [
      {{ settings.social_twitter_link | json }},
      {{ settings.social_facebook_link | json }},
      {{ settings.social_pinterest_link | json }},
      {{ settings.social_instagram_link | json }},
      {{ settings.social_tiktok_link | json }},
      {{ settings.social_tumblr_link | json }},
      {{ settings.social_snapchat_link | json }},
      {{ settings.social_youtube_link | json }},
      {{ settings.social_vimeo_link | json }}
    ],
    "url": {{ request.origin | append: page.url | json }}
  }
</script>

{%- if request.page_type == 'index' -%}
  {% assign potential_action_target = request.origin | append: routes.search_url | append: '?q={search_term_string}' %}
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": {{ shop.name | json }},
      "potentialAction": {
        "@type": "SearchAction",
        "target": {{ potential_action_target | json }},
        "query-input": "required name=search_term_string"
      },
      "url": {{ request.origin | append: page.url | json }}
    }
  </script>
{%- endif -%}
{% if template.name == 'index' %}
  <script>
    function logoResize() {
      const headerSection = document.querySelector('.fn-header-section');

      window.addEventListener('scroll', function () {
        if (window.scrollY === 0) {
          headerSection.classList.remove('scrolled-header');
        } else {
          headerSection.classList.add('scrolled-header');
        }
      });
    }

    document.addEventListener('DOMContentLoaded', logoResize);
    document.addEventListener('shopify:section:load', logoResize);
  </script>
{% endif %}

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header fn-header-section",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menú primario"
    },
    {
      "type": "link_list",
      "id": "secondary_menu",
      "label": "Menú Secundario"
    },
    {
      "type": "text",
      "id": "highlighted_links",
      "label": "Enlaces destacados",
      "info": "Separados por coma (, )"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "options": [
        {
          "value": "dropdown",
          "label": "t:sections.header.settings.menu_type_desktop.options__1.label"
        },
        {
          "value": "mega",
          "label": "t:sections.header.settings.menu_type_desktop.options__2.label"
        },
        {
          "value": "drawer",
          "label": "t:sections.header.settings.menu_type_desktop.options__3.label"
        }
      ],
      "default": "dropdown",
      "label": "t:sections.header.settings.menu_type_desktop.label",
      "info": "t:sections.header.settings.menu_type_desktop.info"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "options": [
        {
          "value": "none",
          "label": "t:sections.header.settings.sticky_header_type.options__1.label"
        },
        {
          "value": "on-scroll-up",
          "label": "t:sections.header.settings.sticky_header_type.options__2.label"
        },
        {
          "value": "always",
          "label": "t:sections.header.settings.sticky_header_type.options__3.label"
        },
        {
          "value": "reduce-logo-size",
          "label": "t:sections.header.settings.sticky_header_type.options__4.label"
        }
      ],
      "default": "on-scroll-up",
      "label": "t:sections.header.settings.sticky_header_type.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__1.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "menu_color_scheme",
      "label": "t:sections.header.settings.menu_color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__3.content",
      "info": "t:sections.header.settings.header__4.info"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": true,
      "label": "t:sections.header.settings.enable_country_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__5.content",
      "info": "t:sections.header.settings.header__6.info"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": true,
      "label": "t:sections.header.settings.enable_language_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__7.content",
      "info": "t:sections.header.settings.header__7.info"
    },
    {
      "type": "checkbox",
      "id": "enable_customer_avatar",
      "default": true,
      "label": "t:sections.header.settings.enable_customer_avatar.label",
      "info": "t:sections.header.settings.enable_customer_avatar.info"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.mobile_layout.content"
    },
    {
      "type": "header",
      "content": "t:sections.all.spacing"
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.header.settings.margin_bottom.label",
      "default": 0
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 20
    }
  ]
}
{% endschema %}
